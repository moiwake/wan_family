<%= form_with model: @spot_register_form, url: url, method: method do |f| %>
  <%= f.fields_for(:spot_attributes, @spot_register_form.spot) do |sf| %>
    <div>
      <%= sf.label :name, "スポット名" %>
      <%= sf.text_field :name, placeholder: "施設や観光地の正式名称でご登録ください。 例）レストラン ワンファミリー" %>
      <div class="address-latlng">
        <div class="registraiton-nav">
          <p>所在地を施設や場所の名前、キーワードで検索してください。</p>
          <p>例）レストラン ワンファミリー 新宿区"</p>
        </div>
        <label for="serch_spot">検索</label>
        <input id="search_spot" type="text" placeholder="検索して所在地を入力">
        <input id="search_button" type="button" value="検索">
        <%= sf.label :address, "所在地" %>
        <%= sf.text_field :address, placeholder: "例）東京都〇〇区〇〇１丁目１", readonly: true %>
        <%= sf.hidden_field :latitude, id: :lat  %>
        <%= sf.hidden_field :longitude, id: :lng %>
        <div id="map_display"></div>
      </div>
      <%= sf.label :image, "スポットの写真" %>
      <%= sf.file_field :image %>
      <%= sf.label :category_id, "スポットカテゴリー" %>
      <%= sf.collection_select :category_id, @categories, :id, :name, include_blank: "選択して下さい" %>
      <div id="allowed_area">
        <%= sf.label :allowed_area_id, "同伴可能エリア" %>
        <%= sf.collection_select :allowed_area_id, @allowed_areas, :id, :area, include_blank: "選択して下さい" %>
      </div>
      <%= sf.label :official_site, "スポットのオフィシャルサイト" %>
      <%= sf.text_field :official_site, placeholder: "リンクを貼ってください。" %>
    </div>
  <% end %>
  <%= f.fields_for(:rule_attributes, @spot_register_form.rules, index: :answer) do |rf| %>
    <div id="pets_allowed_rule">
      <p>同伴のルール（複数選択可能。ご存知の範囲でチェックをお願いいたします。）</p>
      <% @titles.each do |title| %>
        <p><%= title.name %></p>
        <% title.rule_option.each do |rule_opt| %>
          <label>
            <%= rf.check_box "#{rule_opt.id}".to_sym, {
              checked: rule_opt_is_checked?(spot: @spot, checked_rule_opt_ids: @checked_rule_opt_ids, rule_opt_id: rule_opt.id)
            }, "1", "0" %>
            <%= rule_opt.name %>
          </label>
        <% end %>
      <% end %>
    </div>
  <% end %>
  <input type="button" onclick=submit(); value="登録">
<% end %>
